function ninja_forms_serialize_data(e){var t=jQuery("input[name^=ninja_forms_field_"+e+"]");var n=jQuery(t).serializeFullArray();return n}jQuery(document).ready(function(e){e(".ninja-forms-field-list-show-value").live("change",function(){var t=this.id.replace("ninja_forms_field_","");t=t.replace("_list_show_value","");var n=new Object;if(this.checked){e(".ninja-forms-field-"+t+"-list-option-value").each(function(){var r=this.id.replace("ninja_forms_field_"+t+"_list_option_","");r=r.replace("_value_span","");n[r]=e(this).children(".ninja-forms-field-list-option-value").val()});e(".ninja-forms-field-"+t+"-list-option-value").show();e(".ninja-forms-field-conditional-cr-field").each(function(){if(this.value==t){e(this).nextElementInDom(".ninja-forms-field-conditional-cr-value-list:first").children("option").each(function(){this.value=n[this.title]})}});e(".ninja-forms-field-"+t+"-conditional-value").each(function(){e(this).children("option").each(function(){this.value=n[this.title]})})}else{e("#ninja_forms_field_"+t+"_list_options").children(".ninja-forms-field-"+t+"-list-option").find(".ninja-forms-field-list-option-label").each(function(){var r=e(this).parent().parent().parent().parent().parent().prop("id");var i=r.replace("ninja_forms_field_"+t+"_list_option_","");n[i]=this.value});e(".ninja-forms-field-conditional-cr-field").each(function(){if(this.value==t){e(this).nextElementInDom(".ninja-forms-field-conditional-cr-value-list:first").children("option").each(function(){this.value=n[this.title]})}});e(".ninja-forms-field-"+t+"-conditional-value").each(function(){e(this).children("option").each(function(){this.value=n[this.title]})});e(".ninja-forms-field-"+t+"-list-option-value").hide()}});e(".ninja-forms-field-conditional-action").live("change",function(){var t=this.id.replace("action","value");var n=this.id.replace("action","value_label");var r=e("#_form_id").val();var i=e(this).parent().parent().attr("name");var s=e("#ninja_forms_field_"+i+"_conditional_value_type").val();var o=e("#ninja_forms_field_"+i+"_list_show_value").prop("checked");var u=e(".ninja-forms-field-"+i+"-conditional").length;u--;var a=this.value;var f=ninja_forms_serialize_data(i);e.post(ajaxurl,{form_id:r,field_id:i,x:u,action_slug:a,field_data:f,action:"ninja_forms_change_action"},function(n){e("#ninja_forms_field_"+i+"_"+u+"_value_span").prop("innerHTML",n.new_html);if(n.new_type=="list"){e("#"+t).children().remove().end();e(".ninja-forms-field-"+i+"-list-option").each(function(){var n=e(this).find(".ninja-forms-field-list-option-label").val();if(o){var r=e(this).find(".ninja-forms-field-list-option-value").val()}else{var r=n}var s=this.id.replace("ninja_forms_field_"+i+"_list_option_","");e("#"+t).append('<option value="'+r+'" title="'+s+'">'+n+"</option>")})}})});e(".ninja-forms-field-add-conditional").live("click",function(t){t.preventDefault();var n=this.id.replace("ninja_forms_field_","");n=n.replace("_add_conditional","");var r=e("#_form_id").val();var i=e(".ninja-forms-field-"+n+"-conditional").length;e.post(ajaxurl,{form_id:r,field_id:n,x:i,action:"ninja_forms_add_conditional"},function(t){e("#ninja_forms_field_"+n+"_conditionals").append(t)})});e(".ninja-forms-field-remove-conditional").live("click",function(t){t.preventDefault();var n=this.id.replace("ninja_forms_field_","");n=n.replace("_remove_conditional","");var r=this.name;e("#ninja_forms_field_"+n+"_conditional_"+r).remove()});e(".ninja-forms-field-add-cr").live("click",function(t){t.preventDefault();var n=this.id.replace("ninja_forms_field_","");n=n.replace("_add_cr","");var r=e("#_form_id").val();var i=this.name;var s=e(".ninja-forms-field-"+n+"-conditional-"+i+"-cr").length;e.post(ajaxurl,{form_id:r,field_id:n,x:i,y:s,action:"ninja_forms_add_cr"},function(t){e("#ninja_forms_field_"+n+"_conditional_"+i+"_cr").append(t.new_html);var r="";var s="";e(".ninja-forms-field-title").each(function(){r=this.innerHTML;if(r.length>30){r=r.substring(0,30)+"..."}s=this.id.replace("ninja_forms_field_","");s=s.replace("_title","");e(".ninja-forms-field-conditional-cr-field > option").each(function(){if(this.value==s){this.text="ID: "+s+" - "+r}})})})});e(".ninja-forms-field-remove-cr").live("click",function(t){t.preventDefault();var n=this.id.replace("ninja_forms_field_","");n=n.replace("_remove_cr","");var r=this.name;var i=this.rel;e("#ninja_forms_field_"+n+"_conditional_"+r+"_cr_"+i).remove()});e(".ninja-forms-field-conditional-cr-field").live("change",function(){var t=this.id.replace("ninja_forms_field_","");t=t.replace("_cr_field","");var n=this.title.split("_");var r=n[0];var i=n[1];var s=this.value;if(this.value!=""){e.post(ajaxurl,{field_id:t,field_value:s,x:r,y:i,action:"ninja_forms_change_cr_field"},function(n){e("#ninja_forms_field_"+t+"_conditional_"+r+"_cr_"+i+"_value").prop("innerHTML",n.new_html);if(n.new_type=="list"){e(".ninja-forms-field-"+s+"-list-option").each(function(){var n=e(this).find(".ninja-forms-field-list-option-label").val();if(e("#ninja_forms_field_"+s+"_list_show_value").prop("checked")==true){var o=e(this).find(".ninja-forms-field-list-option-value").val()}else{var o=n}var u=this.id.replace("ninja_forms_field_"+s+"_list_option_","");e('select[name="ninja_forms_field_'+t+"\\[conditional\\]\\["+r+"\\]\\[cr\\]\\["+i+'\\]\\[value\\]"]').append('<option value="'+o+'" title="'+u+'">'+n+"</option>")})}})}else{e("#ninja_forms_field_"+t+"_conditional_"+r+"_cr_"+i+"_value").prop("innerHTML","")}})})